"use strict";var regModel=require("../models/registrationModel.js"),courseModel=require("../models/registrationModel.js"),courses=require("../courses.js"),registerController=function(e,r){try{var n=e.body,s=n.username,o=n.email,t=n.password,a=n.role;regModel.create({username:s,email:o,password:t,role:a});r.status(201).json({message:"user created successfully"})}catch(e){r.status(500).json({message:"Error while creating user",error:e})}},loginController=function(r,n){var s,o,t,a,l;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.body,o=s.email,t=s.password,a=s.role,e.next=4,regeneratorRuntime.awrap(regModel.findOne({email:o}));case 4:(l=e.sent).password==t&&"Admin"===a?(r.AdminEmail=o,n.redirect("/admin")):l.password==t&&"User"===a?(r.UserEmail=o,n.redirect("/user")):n.status(404).json({message:"User not found"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.status(404).json({message:"user not found"});case 11:case"end":return e.stop()}},null,null,[[0,8]])},adminController=function(e,r){var n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(regModel.find({role:"User"}));case 2:return n=e.sent,console.log(n),e.next=6,regeneratorRuntime.awrap(regModel.find({role:"Instructor"}));case 6:s=e.sent,console.log(s),r.status(200).json({user:n,instructor:s});case 9:case"end":return e.stop()}})},userController=function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:courses.map(function(e){r.send("<ul>\n            <li>".concat(e.id,"</li>\n            <li>").concat(e.name,"</li>\n            <li>").concat(e.type,"</li>\n            <li>").concat(e.duration,"</li>\n            <li>").concat(e.price,"</li>\n            </ul>"))});case 1:case"end":return e.stop()}})};module.exports={registerController:registerController,loginController:loginController,userController:userController};
//# sourceMappingURL=Controllers.min.js.map
