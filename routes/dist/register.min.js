"use strict";var router=require("express").Router(),sendEmail=require("../config/sendmail.js"),multer=require("multer"),_require=require("../models/registrationModel.js"),registerModel=_require.registerModel,storage=multer.diskStorage({destination:function(e,r,s){s(null,"public/profile")},filename:function(e,r,s){s(null,Date.now()+"-"+r.originalname)}}),upload=multer({storage:storage}).single("profile");router.post("/",upload,function(r,s){var n,a,t,o,i,l,u,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.body,a=n.username,t=n.email,o=n.password,i=n.role,l=r.file.profile,e.prev=2,u=new registerModel({email:t,username:a,password:o,role:i,profile:l}),e.next=6,regeneratorRuntime.awrap(u.save());case 6:return c="\n    <h1>Registered successfully as <span>".concat(u.role,"</span></h1>\n    <p>email:  ").concat(u.email,"</p>\n    <p>password:  ").concat(u.password,"</p>\n    "),e.next=9,regeneratorRuntime.awrap(sendEmail(t,"Registration",c));case 9:s.json({message:"success",user:u}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),s.json({message:"Registration failed",error:e.t0});case 15:case"end":return e.stop()}},null,null,[[2,12]])}),module.exports=router;
//# sourceMappingURL=register.min.js.map
