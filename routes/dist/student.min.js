"use strict";var router=require("express").Router(),_require=require("../models/registrationModel.js"),registerModel=_require.registerModel,courseModel=_require.courseModel;router.post("/login",function(r,t){var s,n,o,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.body,n=s.email,o=s.password,e.next=4,regeneratorRuntime.awrap(registerModel.find({email:n,password:o,role:"student"}));case 4:(a=e.sent)&&t.json({message:"logged in successfully",student:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.json({message:"Error while login",error:e.t0});case 11:case"end":return e.stop()}},null,null,[[0,8]])}),router.post("/course/:_id",function(r,t){var s,n,o,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.body,n=s.email,s.username,e.next=3,regeneratorRuntime.awrap(courseModel.findById(r.params._id));case 3:return o=e.sent,e.next=6,regeneratorRuntime.awrap(registerModel.updateOne({email:n},{$set:{course:o._id}}));case 6:a=e.sent,t.json({message:"success",newData:a}),console.log(o);case 9:case"end":return e.stop()}})}),router.get("/profile",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(courseModel.find());case 2:t=e.sent,r.json({message:"fetched",course:t});case 4:case"end":return e.stop()}})}),module.exports=router;
//# sourceMappingURL=student.min.js.map
