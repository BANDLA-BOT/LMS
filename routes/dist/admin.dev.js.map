{"version":3,"sources":["admin.js"],"names":["router","require","Router","registerModel","studentModel","post","req","res","next","body","email","password","role","findOne","admin","json","message","error","get","find","students","instructors","status","id","params","console","log","deleteOne","_id","user","student","module","exports"],"mappings":"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","sourcesContent":["const router = require('express').Router();\r\nconst {registerModel, studentModel} = require('../models/registrationModel.js')\r\n\r\n\r\n//Admin login\r\n\r\nrouter.post('/login', async(req,res,next)=>{\r\n    try {\r\n    const {email,password,role} = req.body\r\n    const admin = await registerModel.findOne({role:role, email:email, password:password})\r\n    if(!admin){\r\n        res.json({message:\"No user found \"})\r\n    }\r\n    res.json({message:\"Admin logged in successfully\", admin :admin})\r\n    } catch (error) {\r\n        res.json({error:error.message, message:\"Internal server error\"})\r\n    }\r\n})\r\n\r\n//Admin can access all the user details\r\n\r\nrouter.get('/getall', async(req,res)=>{\r\n    try {\r\n        const students = await studentModel.find()\r\n        const instructors = await registerModel.find({role:\"instructor\"})\r\n        if(!students){\r\n            res.json({message:\"No Students found in DB\"})\r\n        }\r\n        if(!instructors){\r\n            res.json({message:\"No instructors found in DB\"})\r\n        }\r\n        res.json({students:students, instructors:instructors})\r\n    } catch (error) {\r\n        res.status(500).json({message:\"Internal server error\"})\r\n    }\r\n})\r\n\r\n//Admin can delete a user \r\n\r\nrouter.delete('/deleteuser/:id', async(req,res)=>{\r\n    try {\r\n        const id = req.params.id\r\n        console.log(id)\r\n        const user = await registerModel.deleteOne({_id:id})\r\n        const student = await studentModel.deleteOne({_id:id})\r\n        res.json({message:\"user\", user, student:student})\r\n    } catch (error) {\r\n        res.status(500).json({message:\"Internal server error\"})\r\n    }\r\n})\r\nmodule.exports = router"],"file":"admin.dev.js"}